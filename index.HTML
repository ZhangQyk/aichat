<!doctype html><html lang="zh-CN"><head><link rel="icon" type="image/png" href="https://icdn.binmt.cc/2512/6945557aba41b.png"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>秋枫AI 2.0</title><style>
:root{
  --bg:#0f172a;
  --panel:#1e293b;
  --accent:#5eead4;
  --text:#e2e8f0;
  --sub:#94a3b8;
  --error:#ef4444;
  --code-bg:#011627;
  --ai-bg:#1e293b;
  --ai-text:#cbd5e1;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  background:linear-gradient(135deg,var(--bg),var(--panel));
  color:var(--text);
  height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 20px;
  background:rgba(15,23,42,.7);
  border-bottom:1px solid rgba(94,234,212,.1);
}
header h1{font-size:20px;color:var(--accent);letter-spacing:.5px;}


.more-box{position:relative;}
.more-btn{
  background:rgba(94,234,212,.1);
  border:1px solid var(--accent);
  color:var(--accent);
  padding:6px 14px;
  border-radius:6px;
  cursor:pointer;
  font-size:14px;
  transition:all .3s ease;
}
.more-btn:active{transform:scale(.95);}
.more-panel{
  position:absolute;
  top:110%;right:0;
  width:300px;
  background:rgba(15,23,42,.95);
  border:1px solid rgba(94,234,212,.2);
  border-radius:8px;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
  box-shadow:0 8px 32px rgba(2,8,20,.6);
  z-index:10;
  opacity:0;
  transform:translateY(-10px);
  pointer-events:none;
  transition:opacity .3s ease, transform .3s ease;
}
.more-panel.show{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}
.more-panel label{font-size:12px;color:var(--sub);}
.more-panel input{
  width:100%;
  padding:8px 10px;
  border:1px solid rgba(94,234,212,.2);
  border-radius:4px;
  background:rgba(15,23,42,.4);
  color:var(--text);
  font-size:13px;
}
.more-panel input:focus{outline:none;border-color:var(--accent);}
.check-line{display:flex;align-items:center;gap:6px;font-size:13px;}
.check-line input{width:auto;}
/* 署名小字 */
.panel-footer{
  margin-top:6px;
  font-size:11px;
  color:var(--sub);
  text-align:center;
  letter-spacing:.5px;
}


.model-fold{
  display:flex;align-items:center;gap:8px;
  padding:10px 20px;
  background:rgba(15,23,42,.5);
  border-bottom:1px solid rgba(94,234,212,.1);
  font-size:13px;
  color:var(--sub);
}
.fold-btn{
  padding:4px 10px;
  border:1px solid rgba(94,234,212,.3);
  background:transparent;
  color:var(--accent);
  border-radius:4px;
  cursor:pointer;
  font-size:12px;
  transition:.2s;
}
.fold-btn:hover{background:rgba(94,234,212,.1);}
.model-bar{
  display:flex;align-items:center;gap:10px;
  padding:10px 20px;
  background:rgba(15,23,42,.5);
  border-bottom:1px solid rgba(94,234,212,.1);
  flex-wrap:wrap;
  max-height:200px;
  overflow:hidden;
  transition:max-height .3s;
}
.model-bar.collapsed{max-height:0;padding:0 20px;border-bottom:none;}
.model-card{
  padding:6px 14px;
  border:1px solid rgba(94,234,212,.2);
  border-radius:20px;
  cursor:pointer;
  font-size:13px;
  transition:.2s;
}
.model-card.active{
  background:var(--accent);
  color:#0f172a;
  border-color:var(--accent);
}
.model-card:hover:not(.active){border-color:var(--accent);}


main{
  flex:1;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.chat-box{
  flex:1;
  overflow-y:auto;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.msg{
  max-width:78%;
  padding:10px 14px;
  border-radius:10px;
  font-size:15px;
  line-height:1.5;
  word-break:break-word;
}
.user{
  align-self:flex-end;
  background:linear-gradient(135deg,var(--accent),#0ea5e9);
  color:#0f172a;
}
.ai-card{
  align-self:stretch;
  background:var(--ai-bg);
  color:var(--ai-text);
  border:1px solid rgba(94,234,212,.15);
  border-radius:10px;
  padding:14px 18px;
  box-shadow:inset 0 0 8px rgba(94,234,212,.05);
  font-size:15px;
  line-height:1.6;
  overflow-wrap:break-word;
}
/* 旋转动效 */
.thinking{
  align-self:flex-start;
  display:flex;align-items:center;gap:8px;
  background:rgba(94,234,212,.1);
  color:var(--accent);
  font-size:13px;
  padding:8px 14px;
  border-radius:16px;
}
.spin{
  width:14px;height:14px;
  border:2px solid rgba(94,234,212,.3);
  border-top-color:var(--accent);
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}

/* Markdown 高亮 */
.ai-card h1,.ai-card h2,.ai-card h3{margin:.4em 0;font-weight:600;color:var(--accent);}
.ai-card pre{
  background:var(--code-bg);
  color:#d6f6ff;
  padding:10px 12px;
  border-radius:6px;
  overflow-x:auto;
  font-size:13px;
  margin:.5em 0;
}
.ai-card code{
  background:rgba(94,234,212,.15);
  color:var(--accent);
  padding:2px 4px;
  border-radius:4px;
  font-size:13px;
}
.ai-card blockquote{
  border-left:4px solid var(--accent);
  padding-left:12px;
  margin:.5em 0;
  color:var(--sub);
}
.ai-card ul,.ai-card ol{margin-left:1.2em;}
.ai-card li{margin:.2em 0;}
.ai-card a{color:var(--accent);text-decoration:none;}
.ai-card a:hover{text-decoration:underline;}
/* 超长链接强制换行 */
.ai-card pre,.ai-card code{white-space:pre-wrap;word-break:break-all;}


.input-bar{
  display:flex;align-items:flex-end;gap:10px;
  padding:12px 16px;
  background:rgba(15,23,42,.5);
  border-top:1px solid rgba(94,234,212,.1);
}
#msgInput{
  flex:1;
  resize:none;
  padding:10px 12px;
  border:1px solid rgba(94,234,212,.2);
  border-radius:6px;
  background:rgba(15,23,42,.4);
  color:var(--text);
  font-size:14px;
  max-height:calc(1.5em * 4 + 20px); /* 4行 */
  overflow-y:auto;
}
#sendBtn{
  padding:10px 20px;
  border:none;
  border-radius:6px;
  background:var(--accent);
  color:#0f172a;
  font-weight:600;
  cursor:pointer;
  transition:all .3s ease;
}
#sendBtn:active{transform:scale(.95);}
#sendBtn:disabled{opacity:.5;cursor:not-allowed;}

/* 全屏按钮动画 */
#fullScreenBtn{
  margin-left:8px;
  padding:6px 12px;
  border:1px solid rgba(94,234,212,.3);
  background:transparent;
  color:var(--accent);
  border-radius:6px;
  cursor:pointer;
  font-size:12px;
  transition:all .3s ease;
}
#fullScreenBtn:active{transform:scale(.95);}
#fullScreenBtn:hover{background:rgba(94,234,212,.1);}

/* 全屏编辑 */
.fullscreen{
  position:fixed;
  inset:0;
  background:var(--bg);
  z-index:100;
  display:flex;
  flex-direction:column;
  padding:20px;
  opacity:0;
  pointer-events:none;
  transition:opacity .3s ease;
}
.fullscreen.show{
  opacity:1;
  pointer-events:auto;
}
.fullscreen textarea{
  flex:1;
  width:100%;
  padding:20px;
  font-size:18px;
  line-height:1.6;
  resize:none;
  border:1px solid var(--accent);
  border-radius:8px;
  background:rgba(15,23,42,.5);
  color:var(--text);
}
.fullscreen .fs-actions{
  margin-top:12px;
  display:flex;
  gap:12px;
  justify-content:flex-end;
}
.fullscreen .fs-actions button{
  padding:8px 16px;
  border:1px solid var(--accent);
  background:transparent;
  color:var(--accent);
  border-radius:6px;
  cursor:pointer;
  font-size:14px;
  transition:all .3s ease;
}
.fullscreen .fs-actions button:active{transform:scale(.95);}
.fullscreen .fs-actions button:hover{background:rgba(94,234,212,.1);}


@keyframes msgIn{
  from{opacity:0;transform:translateY(15px);}
  to{opacity:1;transform:translateY(0);}
}
.msg, .ai-card, .thinking{
  animation:msgIn .35s ease forwards;
}

#errorTip{
  padding:8px 12px;
  background:rgba(220,38,38,.15);
  color:#fecaca;
  border-left:3px solid var(--error);
  font-size:13px;
  display:none;
}
@media(max-width:600px){
  .msg{max-width:90%;}
}
</style></head><body><header><h1>秋枫AI 2.0</h1><div class="more-box"><button class="more-btn" id="moreBtn">更多</button><div class="more-panel" id="morePanel"><label>API 地址</label><input id="apiUrl" type="text" value="https://api.siliconflow.cn/v1/chat/completions"><label>API 密钥</label><input id="apiKey" type="password" placeholder="留空使用内置"><div class="check-line"><input id="useBuiltin" type="checkbox" checked><label for="useBuiltin">使用内置密钥</label></div><div class="panel-footer">From：秋枫Mod<br>Made By Kimi AI<br>https://zyk.netlify.app</div></div></div></header><!-- 模型选择折叠栏 --><div class="model-fold"><span style="font-size:13px;color:var(--sub)">模型：</span><button class="fold-btn" id="foldBtn">展开</button></div><div class="model-bar collapsed" id="modelBar"><div class="model-card active" data-val="tencent/Hunyuan-MT-7B">腾讯混元-MT-7B</div><div class="model-card" data-val="THUDM/GLM-4.1V-9B-Thinking">智谱GLM-4V-9B</div><div class="model-card" data-val="deepseek-ai/DeepSeek-R1-0528-Qwen3-8B">DeepSeek-R1-0528</div><div class="model-card" data-val="Qwen/Qwen3-8B">通义千问3-8B</div><div class="model-card" data-val="THUDM/GLM-Z1-9B-0414">智谱GLM-Z1-9B</div><div class="model-card" data-val="deepseek-ai/DeepSeek-R1-Distill-Qwen-7B">DeepSeek-R1-Distill</div><div class="model-card" data-val="Qwen/Qwen2.5-7B-Instruct">通义千问2.5-7B</div></div><main><div class="chat-box" id="chatBox"></div><div class="input-bar"><textarea id="msgInput" rows="1" placeholder="输入消息"></textarea><button id="sendBtn">发送</button><button id="fullScreenBtn">全屏</button></div><div id="errorTip"></div></main><script>

const BUILTIN_KEY = "sk-yiggpvfnihiqqkhlwlfrwjrhrlnjpbormvweiysfjkjhstyo";


const moreBtn   = document.getElementById('moreBtn');
const morePanel = document.getElementById('morePanel');
const apiUrlIn  = document.getElementById('apiUrl');
const apiKeyIn  = document.getElementById('apiKey');
const useBuiltin= document.getElementById('useBuiltin');
const foldBtn   = document.getElementById('foldBtn');
const modelBar  = document.getElementById('modelBar');
const modelCards= document.querySelectorAll('.model-card');
const chatBox   = document.getElementById('chatBox');
const msgInput  = document.getElementById('msgInput');
const sendBtn   = document.getElementById('sendBtn');
const fullBtn   = document.getElementById('fullScreenBtn');
const errorTip  = document.getElementById('errorTip');

let currentModel = 'tencent/Hunyuan-MT-7B';
let history = [];


moreBtn.onclick = ()=> morePanel.classList.toggle('show');
document.addEventListener('click', e=>{
  if(!e.target.closest('.more-box')) morePanel.classList.remove('show');
});
useBuiltin.onchange = ()=>{
  apiKeyIn.disabled = useBuiltin.checked;
  if(useBuiltin.checked) apiKeyIn.value = '';
};
apiKeyIn.disabled = useBuiltin.checked;


foldBtn.onclick = ()=>{
  modelBar.classList.toggle('collapsed');
  foldBtn.textContent = modelBar.classList.contains('collapsed') ? '展开' : '收起';
};
modelCards.forEach(card=>{
  card.addEventListener('click', ()=>{
    modelCards.forEach(c=>c.classList.remove('active'));
    card.classList.add('active');
    currentModel = card.dataset.val;
  });
});


function addUserMsg(text){
  const div = document.createElement('div');
  div.className = 'msg user';
  div.textContent = text;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
  // 动画结束移除类
  div.addEventListener('animationend', ()=> div.style.animation = '');
}
function addAIMsg(html){
  const wrap = document.createElement('div');
  wrap.className = 'ai-card';
  wrap.innerHTML = html;
  chatBox.appendChild(wrap);
  chatBox.scrollTop = chatBox.scrollHeight;
  wrap.addEventListener('animationend', ()=> wrap.style.animation = '');
}
function addThinking(){
  const div = document.createElement('div');
  div.className = 'thinking';
  div.innerHTML = '<div class="spin"></div><span>思考中…</span>';
  div.id = 'thinking';
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
  div.addEventListener('animationend', ()=> div.style.animation = '');
  return div;
}


function md2html(md){
  return md
    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
    .replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre><code>$2</code></pre>')
    .replace(/`([^`]+)`/g, '<code>$1</code>')
    .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
    .replace(/^> (.*$)/gim, '<blockquote>$1</blockquote>')
    .replace(/^[-*] (.*$)/gim, '<ul><li>$1</li></ul>')
    .replace(/^\d+\. (.*$)/gim, '<ol><li>$1</li></ol>')
    .replace(/\[(.+?)\]\((.+?)\)/g, '<a href="$2" target="_blank">$1</a>')
    .replace(/\n/g, '<br>');
}


function autoGrow(){
  const maxRows = 4;
  const lh = 1.5;
  const rows = Math.min(maxRows, Math.ceil(this.scrollHeight / (lh * 16)));
  this.rows = rows;
}
msgInput.addEventListener('input', autoGrow);

let fsDiv = null;
function openFullScreen(){
  fsDiv = document.createElement('div');
  fsDiv.className = 'fullscreen';
  const ta = document.createElement('textarea');
  ta.value = msgInput.value;
  ta.spellcheck = false;
  const actions = document.createElement('div');
  actions.className = 'fs-actions';
  const okBtn = document.createElement('button');
  okBtn.textContent = '确定';
  const cancelBtn = document.createElement('button');
  cancelBtn.textContent = '取消';
  actions.append(cancelBtn, okBtn);
  fsDiv.append(ta, actions);
  document.body.appendChild(fsDiv);
  // 动画入场
  requestAnimationFrame(()=> fsDiv.classList.add('show'));
  ta.focus();
  okBtn.onclick = ()=>{
    msgInput.value = ta.value;
    autoGrow.call(msgInput);
    closeFullScreen();
  };
  cancelBtn.onclick = closeFullScreen;
  ta.onkeydown = e=>{
    if(e.key === 'Escape') closeFullScreen();
  };
}
function closeFullScreen(){
  if(!fsDiv) return;
  fsDiv.classList.remove('show');
  fsDiv.addEventListener('transitionend', ()=>{
    if(fsDiv) document.body.removeChild(fsDiv), fsDiv = null;
  }, {once:true});
}
fullBtn.onclick = openFullScreen;


sendBtn.onclick = async ()=>{
  const content = msgInput.value.trim();
  if(!content) return;
  addUserMsg(content);
  history.push({role:'user', content});
  msgInput.value = '';
  autoGrow.call(msgInput);

  const key = useBuiltin.checked ? BUILTIN_KEY : apiKeyIn.value.trim();
  if(!key) return showErr('请填写 API 密钥');
  const url = apiUrlIn.value.trim();

  const thinking = addThinking();
  sendBtn.disabled = true;

  try{
    const res = await fetch(url,{
      method:'POST',
      headers:{
        'Content-Type':'application/json',
        'Authorization':`Bearer ${key}`
      },
      body:JSON.stringify({
        model: currentModel,
        messages: history,
        temperature: 0.7,
        max_tokens: 2000,
        top_p: 0.85
      })
    });
    if(!res.ok) throw new Error(`${res.status} ${res.statusText}`);
    const json = await res.json();
    const reply = json.choices[0].message.content;
    thinking.remove();
    addAIMsg(md2html(reply));
    history.push({role:'assistant', content:reply});
  }catch(e){
    thinking.remove();
    showErr(e.message);
  }finally{
    sendBtn.disabled = false;
  }
};

function showErr(msg){
  errorTip.textContent = msg;
  errorTip.style.display = 'block';
  setTimeout(()=>errorTip.style.display='none',3000);
}
</script></body></html>